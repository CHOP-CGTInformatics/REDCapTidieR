<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import a REDCap database into a tidy supertibble — read_redcap • REDCapTidieR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import a REDCap database into a tidy supertibble — read_redcap"><meta name="description" content='Query the REDCap API to retrieve data and metadata about a project,
and transform the output into a "supertibble" that contains data
and metadata organized into tibbles, broken down by instrument.'><meta property="og:description" content='Query the REDCap API to retrieve data and metadata about a project,
and transform the output into a "supertibble" that contains data
and metadata organized into tibbles, broken down by instrument.'><meta property="og:image" content="https://chop-cgtinformatics.github.io/REDCapTidieR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">REDCapTidieR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/REDCapTidieR.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/glossary.html">Glossary</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/diving_deeper.html">Diving Deeper: Understanding REDCapTidieR Data Tibbles</a></li>
    <li><a class="dropdown-item" href="../articles/export_to_xlsx.html">Exporting to Excel</a></li>
    <li><a class="dropdown-item" href="../articles/labelled.html">Using Labelled Vectors with REDCapTidieR</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CHOP-CGTInformatics/REDCapTidieR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import a REDCap database into a tidy supertibble</h1>
      <small class="dont-index">Source: <a href="https://github.com/CHOP-CGTInformatics/REDCapTidieR/blob/main/R/read_redcap.R" class="external-link"><code>R/read_redcap.R</code></a></small>
      <div class="d-none name"><code>read_redcap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Query the REDCap API to retrieve data and metadata about a project,
and transform the output into a "supertibble" that contains data
and metadata organized into tibbles, broken down by instrument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_redcap</span><span class="op">(</span></span>
<span>  <span class="va">redcap_uri</span>,</span>
<span>  <span class="va">token</span>,</span>
<span>  raw_or_label <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>  forms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  export_survey_fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  export_data_access_groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  suppress_redcapr_messages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  guess_max <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  allow_mixed_structure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"redcaptidier.allow.mixed.structure"</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-redcap-uri">redcap_uri<a class="anchor" aria-label="anchor" href="#arg-redcap-uri"></a></dt>
<dd><p>The
URI/URL of the REDCap server (e.g.,
"https://server.org/apps/redcap/api/"). Required.</p></dd>


<dt id="arg-token">token<a class="anchor" aria-label="anchor" href="#arg-token"></a></dt>
<dd><p>The user-specific string that serves as the password for a
project. Required.</p></dd>


<dt id="arg-raw-or-label">raw_or_label<a class="anchor" aria-label="anchor" href="#arg-raw-or-label"></a></dt>
<dd><p>A string (either 'raw', 'label', or 'haven') that specifies whether
to export the raw coded values or the labels for the options of categorical
fields. Default is 'label'. If 'haven' is supplied, categorical fields are converted
to <code>haven_labelled</code> vectors.</p></dd>


<dt id="arg-forms">forms<a class="anchor" aria-label="anchor" href="#arg-forms"></a></dt>
<dd><p>A character vector of REDCap instrument names that specifies
which instruments to import. Default is <code>NULL</code> which imports all instruments
in the project.</p></dd>


<dt id="arg-export-survey-fields">export_survey_fields<a class="anchor" aria-label="anchor" href="#arg-export-survey-fields"></a></dt>
<dd><p>A logical that specifies whether to export
survey identifier and timestamp fields. The default, <code>NULL</code>,
tries to determine if survey fields exist and returns them if available.</p></dd>


<dt id="arg-export-data-access-groups">export_data_access_groups<a class="anchor" aria-label="anchor" href="#arg-export-data-access-groups"></a></dt>
<dd><p>A logical that specifies whether to export
the data access group field. The default, <code>NULL</code>, tries to determine if a data
access group field exists and returns it if available.</p></dd>


<dt id="arg-suppress-redcapr-messages">suppress_redcapr_messages<a class="anchor" aria-label="anchor" href="#arg-suppress-redcapr-messages"></a></dt>
<dd><p>A logical to control whether to suppress messages
from REDCapR API calls. Default <code>TRUE</code>.</p></dd>


<dt id="arg-guess-max">guess_max<a class="anchor" aria-label="anchor" href="#arg-guess-max"></a></dt>
<dd><p>A positive <a href="https://rdrr.io/r/base/numeric.html" class="external-link">base::numeric</a> value
passed to <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code> that specifies the maximum number of records to
use for guessing column types. Default <code>Inf</code>.</p></dd>


<dt id="arg-allow-mixed-structure">allow_mixed_structure<a class="anchor" aria-label="anchor" href="#arg-allow-mixed-structure"></a></dt>
<dd><p>A logical to allow for support of mixed repeating/non-repeating
instruments. Setting to <code>TRUE</code> will treat the mixed instrument's non-repeating versions
as repeating instruments with a single instance. Applies to longitudinal projects
only. Default <code>FALSE</code>. Can be set globally with <code>options(redcaptidier.allow.mixed.structure = TRUE)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tibble</code> in which each row represents a REDCap instrument. It
contains the following columns:</p><ul><li><p><code>redcap_form_name</code>, the name of the instrument</p></li>
<li><p><code>redcap_form_label</code>, the label for the instrument</p></li>
<li><p><code>redcap_data</code>, a tibble with the data for the instrument</p></li>
<li><p><code>redcap_metadata</code>, a tibble of data dictionary entries for each field in the instrument</p></li>
<li><p><code>redcap_events</code>, a tibble with information about the arms and longitudinal events represented in the instrument.
Only if the project has longitudinal events enabled</p></li>
<li><p><code>structure</code>, the instrument structure, either "repeating" or "nonrepeating"</p></li>
<li><p><code>data_rows</code>, the number of rows in the instrument's data tibble</p></li>
<li><p><code>data_cols</code>, the number of columns in the instrument's data tibble</p></li>
<li><p><code>data_size</code>, the size in memory of the instrument's data tibble computed by <code><a href="https://lobstr.r-lib.org/reference/obj_size.html" class="external-link">lobstr::obj_size()</a></code></p></li>
<li><p><code>data_na_pct</code>, the percentage of cells in the instrument's data columns that are <code>NA</code> excluding identifier and
form completion columns</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses the <a href="https://ouhscbbmc.github.io/REDCapR/index.html" class="external-link">REDCapR</a>
package to query the REDCap API. The REDCap API returns a
<a href="https://en.wikipedia.org/wiki/Block_matrix" class="external-link">block matrix</a> that mashes
data from all data collection instruments
together. The <code>read_redcap()</code> function
deconstructs the block matrix and splices the data into individual tibbles,
where one tibble represents the data from one instrument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">redcap_uri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"REDCAP_URI"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"REDCAP_TOKEN"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">read_redcap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">redcap_uri</span>,</span></span>
<span class="r-in"><span>  <span class="va">token</span>,</span></span>
<span class="r-in"><span>  raw_or_label <span class="op">=</span> <span class="st">"label"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Richard Hanna, Stephan Kadauke, Ezra Porter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

